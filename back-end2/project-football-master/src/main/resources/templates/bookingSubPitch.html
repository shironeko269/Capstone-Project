<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{base.html}">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" th:href="@{../../usercssjs/assets/css/products.css}">
    <link rel="stylesheet" th:href="@{../../usercssjs/assets/css/bookingSubPitch.css}">
    <link th:href="@{http://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css}" rel="stylesheet">
    <script th:src="@{http://code.jquery.com/jquery-1.11.1.min.js}"></script>
    <!-- <script src="http://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script> -->
    <link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css}">
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css}" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js}"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css"
          th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css}">
    <link rel="stylesheet" type="text/css"
          th:href="@{https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css}">
    <link rel="stylesheet" type="text/css"
          th:href="@{https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css}">
    <title>Yotsuba</title>
  <link rel="shortcut icon" th:href="@{/images/logo.svg}">
    <style>
        header .navbar {
            padding: 20px 0px;
        }
        .background-header .navbar {
            padding: 20px 0px;
        }
    </style>
</head>

<body>

<div style="background-color: whitesmoke;" layout:fragment="content">
    <style>

        #subPitchName {
            margin-bottom: 0;
        }

        #price {
            font-size: 25px;
        }

        .imgService {
            /*width: 100px;*/
            border-radius: 0.5em;
            height: 180px;
        }

        #service:hover {
            transform: scale(1.1);
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.6);
            transition: all 0.4s ease 0.1s;
        }

        #sub-pitch-info {
            border-radius: 1em;
            box-shadow: 0 0 3em -1em black;
            padding: 24px;
        }

        #list-service {
            border-radius: 1em;
            box-shadow: 0 0 3em -1em black;
            padding: 24px;
        }

        #service {
            height: 280px;
            width: 230px;
            border-radius: 1em;
        }

        #dateInput {
            height: 45px;
        }

        #timestart {
            height: 45px;
        }

        #timeend {
            height: 45px;
        }

        .error-message {
            color: red;
            margin: 0px;
        }
    </style>
    <br>
<!--    <div class="heading-section">-->
<!--    </div>-->
    <div class="container" th:object="${subPitch}" style="padding-bottom: 5%">
    <div class="row" >
        <div class="col-md-5">
            <div id="slider" class="owl-carousel product-slider">
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage1()}" height="280px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage2()}" height="280px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage3()}" height="280px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage4()}" height="280px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage5()}" height="280px"/>
                </div>
            </div>
            <div id="thumb" class="owl-carousel product-thumb">
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage1()}" height="70px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage2()}" height="70px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage3()}" height="70px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage4()}" height="70px"/>
                </div>
                <div class="item">
                    <img th:src="'/images/image-subpitch/'+*{getImage5()}" height="70px"/>
                </div>
            </div>
            <hr>
        </div>
        <p th:text="*{getId()}" id="subPitchId" style="display: none"></p>
        <div class="card col-md-7" id="sub-pitch-info">
            <div class="product-dtl">
                <div class="product-info">
                    <div class="product-name" style="font-weight: 500">
                        <h3 id="subPitchName">
                            <span th:text="*{getName()}"></span>
                            <span th:text="'('+*{getNameType()}+')'"></span>
                        </h3>
                    </div>
                    <div class="inline">
                        <p style="margin-bottom: 2px;  margin-right: 5px; font-weight: 400;">
                            <span><i class="fas fa-map-marker-alt"></i></span>
                            <span th:text="${pitchAddress}" id="address"></span>
                        </p>
                    </div>
                    <h6 style="color: red">
                        <span id="price" th:text="*{#numbers.formatDecimal(getPrice(),0, 'COMMA', 0, 'POINT')}"></span>
                        <span style="font-size: 20px">đ/h</span>
                    </h6>
                </div>
                <p th:text="*{getDescription()}" style="clear: both;color: black;font-weight: 400;"></p>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <h5>Chọn ngày*</h5>
                            <input type="date" class="form-control" id="dateInput"
                                   aria-describedby="helypId"
                                   onchange="checkDateBooking()">
                            <small class="invalid-date">ngày đặt sân</small>
                        </div>
                    </div>
                    <div class="col-md-8 time ">
                        <h5>Chọn giờ*</h5>
                        <div class="row " style="height: 70px;">
                            <div class="form-group col-md-6">
                                <input type="time" class="form-control" id="timestart"
                                       onchange="checkDateBooking(),timeFee() "
                                       aria-describedby="helpId" required>
                                <small class="invalid-time-start">giờ bắt đầu</small>
                            </div>
                            <div class="form-group col-md-6">
                                <input type="time" class="form-control" id="timeend"
                                       onchange="checkDateBooking(),timeFee() "
                                       aria-describedby="helpId" required>
                                <small class="invalid-time-end">giờ kết thúc</small>
                            </div>
                        </div>
                        <h6 class="error-message"></h6>
                    </div>
                </div>
                <div>
                    <h3 style="float:right; color: red;">đ</h3>
                    <h3 id="hourFee" style="float:right; color: red;">0</h3>
                    <h4>Phí đặt sân:</h4>
                </div>
                <div class="list-hour">
                    <label>Những giờ đã được đặt</label>
                    <div class="row ml-1" id="listTimeBooked">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="service card"  id="list-service">
        <h3>Dịch vụ</h3>
        <hr>
        <h4>Nước giải khát</h4>
        <div class="drink">
            <div class="row card-block p-4">
                <div th:each="service:${serviceList1}" id="service" th:value="${service.getId()}"
                     class=" col-sm-2 card text-left p-2 m-2">
                    <img class="imgService" th:src="'/images/image-service/'+${service.getImage()}">
                    <div class="card-body">
                        <p th:text="${service.getId()}" class="serviceId" style="display:none;"></p>
                        <h5 th:text="${service.getName()}"></h5>
                        <h8 th:id="'pri'+${service.getId()}" class=" float-left mr-1 center mt-1"
                            th:text="${#numbers.formatDecimal(service.getPrice(),0, 'COMMA', 0, 'POINT')}"></h8>
                        đ/
                        <h7 th:text="${service.getUnit()}" class="mt-1"></h7>
                        <input th:id="'qty'+${service.getId()}" type="number" style="width: 40px;" value="0" min="0"
                               th:max="${service.getQuantity()}"
                               th:attr="onchange=|getFeeOneCard('pri${service.getId()}','qty${service.getId()}','tt${service.getId()}')|">
                        <p th:id="'tt'+${service.getId()}" class="tt" style="display: none">0</p>
                    </div>
                </div>

            </div>
            <h4>Dịch vụ cho thuê</h4>
            <div class="shirt">
                <div class="row card-block p-4">
                    <div th:each="service:${serviceList2}" id="service" th:value="${service.getId()}"
                         class=" col-sm-2 card text-left p-2 m-2">
                        <img class="imgService" th:src="'/images/image-service/'+${service.getImage()}">
                        <div class="card-body">
                            <p th:text="${service.getId()}" class="serviceId" style="display:none;"></p>
                            <h5 th:text="${service.getName()}"></h5>
                            <h8 th:id="'pri'+${service.getId()}" class=" float-left mr-1 center mt-1"
                                th:text="${#numbers.formatDecimal(service.getPrice(),0, 'COMMA', 0, 'POINT')}"></h8>đ/
                            <h7 th:text="${service.getUnit()}" class="mt-1"></h7>
                            <input th:id="'qty'+${service.getId()}" type="number" style="width: 40px;" value="0" min="0"
                                   th:max="${service.getQuantity()}"
                                   th:attr="onchange=|getFeeOneCard('pri${service.getId()}','qty${service.getId()}','tt${service.getId()}')|">
                            <p th:id="'tt'+${service.getId()}" class="tt" style="display: none">0</p>
                        </div>
                    </div>
                </div>
                <div>
                    <h4 style="float: left; margin-right: 280px;">Phí dịch vụ: </h4>
                    <h4 id="totalAll" style="color: red;float: left">0</h4>
                    <h4 style="color: red">đ</h4>
                </div>
                <br>
                <div class="message card mt-4 p-3" style="width: 100%;">
                    <p>Ghi chú:</p>
                    <textarea id="note" cols="138" rows="5"></textarea>
                </div>
            </div>

            <br>
            <div class="payment ml-3" style="float: right">
                <div>
                    <h4 style=" margin-right: 100px;margin-left: 0px;float: left;">Tổng cộng: </h4>
                    <h4 style="color: red;"><span id="totalFinal">0</span><span>đ</span></h4>
                </div>
                <div class="form-group">
                    <label style="font-weight: bold; margin-right: 420px; ">Trả trước</label>
                    <div class="">
                        <div class="pre-oder-fee">
                            <input type="text" class="form-control" id="preOrder"
                                   oninput="checkPreOrder()" ;
                                   aria-describedby="helpId" placeholder="Nhập số tiền bạn muốn trả trước">
                            <small id="helpId" class="invalid-preOder">Số tiền trả trước ít nhất phải bằng 30% tổng số tiền</small>
                        </div>
                    </div>
                </div>
                <div class="csc">
                    <button onclick="setUpModal()" type="submit" id="btnBooking" class="btn btn-danger mt-3"data-bs-target="#exampleModal" data-bs-toggle="modal" style="float: right">
                        Tiến hành đặt sân
                    </button>
                </div>
            </div>

            <br><br>
        </div>
        <!--    </form>-->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
             style="padding-top: 70px;">
            <div class="modal-dialog" style="margin-right: 500px">
                <div class="modal-content" style="width: 700px;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Thông tin đặt sân</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="m-2" style="height: 24px;">
                        <h6 style="float: left; margin-top: 1px; margin-left: 8px;font-size: 18px;">Ngày tạo:&#160;</h6>
                        <p id="createDateMd" style="margin-bottom: 0px;font-size: 15px;font-weight: 500;"></p>
                    </div>

                    <div class="modal-body" style="height: auto; padding-top: 1px;">
                        <div class="row">
                            <div style="width: 210px;" class="col-sm-5 ">
                                <h6 style="font-size: 18px;">Thông tin khách hàng</h6>
                                <div>
                                    <div>
                                        <p class="mb-0" th:text="${name}" style="font-weight: 500;"></p>
                                        <p th:text="${phone}" style="font-weight: 500;"></p>
                                    </div>
                                </div>
                            </div>
                            <div style="width: 479px;" class="col-sm-7">
                                <h6 style="float: right;font-size: 18px;">Thông tin sân</h6>
                                <div>
                                    <div>
                                        <p style=" clear: both; float: right;font-weight: 500;" class="mb-0"
                                           id="subPitchNameMd"></p>
                                        <p style=" clear: both; float: right;font-weight: 500;">
                                            <span><i class="fas fa-map-marker-alt"></i></span>
                                            <span id="addressMd"></span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <h6 style="font-size: 18px;">Giờ đặt</h6>
                        <div class="card p-2 " style="height: 45px;">
                            <div class="totalmd">
                                <p style="float: right; margin-right: 26px;font-weight: 500;">
                                    <span id="hourFeeMd"></span><span>đ</span></p>
                                <p style="float: right; margin-right: 58px; font-weight: bold;">Phí đặt sân: </p>
                                <div class="row">
                                    <p id="timeMd" style="width: 130px;font-weight: 500;" class="col-sm-5 pr-0"></p>
                                    <p class="col-sm-1">/</p>
                                    <p id="dateMd" class="col-sm-5" style="font-weight: 500;">28/06/2021</p>
                                </div>
                            </div>
                        </div>
                        <h6 style="font-size: 18px">Dịch vụ</h6>
                        <div class="card">
                            <table class="table mb-0">
                                <thead>
                                <tr>
                                    <th>Tên</th>
                                    <th style="text-align: center;">Đơn vị</th>
                                    <th style="text-align: center;">Giá</th>
                                    <th style="text-align: center;">Số lượng</th>
                                    <th style="text-align: center;">Thành tiền</th>
                                </tr>
                                </thead>
                                <tbody id="serviceTable">
                                </tbody>
                            </table>
                        </div>
                        <br>
                        <div class="totalmd">
                            <h7 class="col-4" style="float: left; font-weight: bold;">Phí dịch vụ:</h7>
                            <h7 class="col-7" style="float: left; margin-right: 35px;"><span id="serviceFee"></span><span>đ</span></h7>
                        </div>
                        <br>
                        <div class="pre mt-2" style="clear: both;">
                            <h7 class="col-4" style="float: left; font-weight: bold;">Tổng cộng:</h7>
                            <h7 class="col-7" style="float: left;  margin-right: 35px;"><span id="totalAllMd"></span><span>đ</span></h7>
                        </div>
                        <br>
                        <div class="pre mt-2" style="clear: both;">
                            <h7 class="col-4" style="float: left; font-weight: bold;">Đặt trước:</h7>
                            <h7 class="col-7" style="float: left; margin-right: 35px;"><span id="preOrderMd"></span><span>đ</span></h7>
                        </div>
                        <br>
                        <div class="pre mt-2" style="clear: both;">
                            <h7 class="col-4" style="float: left; font-weight: bold;">Hình thức:</h7>
                            <h7 class="col-7" style="float: left; margin-right: 35px;">Thanh toán bằng razorpay</h7>
                        </div>
                        <br>
                        <div class="pre" style="clear: both;">
                            <hr>
                            <h6 class="col-4" style="float: left; font-weight: bold;">Phí còn lại: </h6>
                            <h6 class="col-7" id="postOrderMd" style="float: left; margin-right: 36px; color: red;">
                                340.000đ</h6>
                        </div>
                        <br>
                        <div style="clear: both;">
                            <h6 style="float: left"><span>Ghi chú:</span><span>&nbsp;</span></h6>
                            <h6 id="noteMd" style="">dasd</h6>
                        </div>
                        <div class="modal-footer">
                            <button onclick="confirmBooking()" class="btn btn-success">Thanh toán bằng Razorpay
                            </button>
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="cancel">Hủy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script>
        $(document).ready(() => {
            $("#home-active").removeClass("active");
            $("#pitch-active").addClass("active");
        })
    </script>

</div>
</body>
</html>