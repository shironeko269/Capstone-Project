<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{manager/base.html}">
<head>
<!--    <meta charset="UTF-8">-->
    <title>List Booking</title>

    <!--    &lt;!&ndash; Colorpicker Css &ndash;&gt;-->
    <!--    <link th:href="@{../../plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.css}" rel="stylesheet" />-->

    <!--    &lt;!&ndash; Dropzone Css &ndash;&gt;-->
    <!--    <link th:href="@{../../plugins/dropzone/dropzone.css}" rel="stylesheet">-->

    <!--    &lt;!&ndash; Multi Select Css &ndash;&gt;-->
    <!--    &lt;!&ndash;    <link th:href="@{../../plugins/multi-select/css/multi-select.css}" rel="stylesheet">&ndash;&gt;-->

    <!--    &lt;!&ndash; Bootstrap Spinner Css &ndash;&gt;-->
    <!--    <link th:href="@{../../plugins/jquery-spinner/css/bootstrap-spinner.css}" rel="stylesheet">-->

    <!--    &lt;!&ndash; Bootstrap Tagsinput Css &ndash;&gt;-->
    <!--    <link th:href="@{../../plugins/bootstrap-tagsinput/bootstrap-tagsinput.css}" rel="stylesheet">-->

    <!--    &lt;!&ndash; Bootstrap Select Css &ndash;&gt;-->
    <!--    &lt;!&ndash;    <link th:href="@{../../plugins/bootstrap-select/css/bootstrap-select.css}" rel="stylesheet" />&ndash;&gt;-->

    <!--    &lt;!&ndash; noUISlider Css &ndash;&gt;-->
    <!--    <link th:href="@{../../plugins/nouislider/nouislider.min.css}" rel="stylesheet" />-->

    <!--    &lt;!&ndash; JQuery DataTable Css &ndash;&gt;-->
    <!--    <link th:href="@{../../plugins/jquery-datatable/skin/bootstrap/css/dataTables.bootstrap.css}" rel="stylesheet">-->
    <!--    &lt;!&ndash; Sweetalert Css &ndash;&gt;-->
    <!--    <link th:href="@{../../plugins/sweetalert/sweetalert.css}" rel="stylesheet" />-->


    <link th:href="@{https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap}"
          rel="stylesheet">
    <link rel="stylesheet" th:href="@{../../usercssjs/assets/css/products.css}">
    <link rel="stylesheet" th:href="@{../../usercssjs/assets/css/bookingSubPitch.css}">
    <!--    <link th:href="@{http://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css}" rel="stylesheet">-->
    <script th:src="@{http://code.jquery.com/jquery-1.11.1.min.js}"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css}">
    <!--    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css}" rel="stylesheet"-->
    <!--          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">-->

    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js}"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <link th:href="@{https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800&display=swap}"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css"
          th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css}">
    <link rel="stylesheet" type="text/css"
          th:href="@{https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css}">
    <link rel="stylesheet" type="text/css"
          th:href="@{https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css}">
<!--    <script>-->
<!--        $(document).ready(() => {-->
<!--            $("#home").addClass("active");-->
<!--        })-->
<!--    </script>-->
</head>
<body>
<section class="content" layout:fragment="content">
    <style>

        .img {
            height: 150px;
            width: 150px;
            border-radius: 0.5em;
        }

        #service1:hover {
            transform: scale(1.1);
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.6);
            transition: all 0.4s ease 0.1s;
        }

        #list-service1 {
            border-radius: 1em;
            box-shadow: 0 0 3em -1em black;
            padding: 24px;
        }

        #service1 {
            height: 250px;
            width: 200px;
            border-radius: 1em;
        }

        input[type="number"] {
            -webkit-appearance: textfield;
            -moz-appearance: textfield;
            appearance: textfield;
        }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
        }

        .number-input {
            border: 2px solid #ddd;
            display: inline-flex;
        }

        .number-input,
        .number-input * {
            box-sizing: border-box;
        }

        .number-input button {
            outline:none;
            -webkit-appearance: none;
            background-color: #4292dc;
            border: none;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            cursor: pointer;
            margin: 0;
            position: relative;
            padding:0;
        }

        .number-input button:before,
        .number-input button:after {
            display: inline-block;
            position: absolute;
            content: '';
            width: 0.5rem;
            height: 2px;
            background-color: #212121;
            transform: translate(-50%, -50%);
        }
        .number-input button.plus:after {
            transform: translate(-50%, -50%) rotate(90deg);
        }

        .number-input input[type=number] {
            font-family: sans-serif;
            max-width: 4.5rem;
            padding: .5rem;
            border:0;
            text-align: center;
            outline:none;
        }
        .number-input{
            border: solid #c2c4c6;
            border-width:2px;
        }
    </style>
    <div class="container-fluid">
        <div class="block-header">
            <h2>
                Hệ Thống Quản Lí Sân Bóng Và Bán Phụ Kiện Thể Thao
            </h2>
        </div>
        <!-- Basic Examples -->
        <input type="hidden" name="scheduleId" th:value="${scheduleId}">
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="service card" id="list-service1">
                    <h3>Dịch vụ</h3>
                    <hr>
                    <h4>Nước giải khát</h4>
                    <div class="drink">
                        <div class="row card-block p-4" style="margin-left: 20px">
                            <div th:each="service:${serviceList1}" id="service1" th:value="${service.getId()}"
                                 class=" col-sm-2 card text-left p-2 m-2" style="margin-left: 10px;margin-right: 10px">
                                <img class="img" th:src="'/images/image-service/'+${service.getImage()}">
                                <div class="card-body">
                                    <p th:text="${service.getId()}" class="serviceId" style="display:none;"></p>
                                    <h5 th:text="${service.getName()}"></h5>
                                    <h8 th:id="'pri'+${service.getId()}" class=" float-left mr-1 center mt-1"
                                        th:utext="${#numbers.formatDecimal(service.getPrice(),0, 'COMMA', 0, 'POINT')}"></h8>
                                    đ/
                                    <h7 th:text="${service.getUnit()}" class="mt-1"></h7>
                                    <div class="number-input" th:id="'demo'+${service.getId()}">
                                        <button onclick="this.parentNode.querySelector('input[type=number]').stepDown()" ></button>
                                        <input th:id="'qty'+${service.getId()}" type="number" style="width: 40px;"
                                               th:max="${service.getQuantity()}"
                                               th:each="scheduleItem:${objPitchScheduleService}"
                                               th:if="${scheduleItem.servicePitchId}==${service.id}"
                                               th:value="${scheduleItem.quantity}?:0"
                                               name="quantityDrink"
                                               th:min="${scheduleItem.quantity}"
                                               th:attr="onchange=|getFeeOneCard('pri${service.getId()}','qty${service.getId()}','tt${service.getId()}')|"
                                        >
                                        <input th:id="'qty'+${service.getId()}" type="number" style="width: 40px;"
                                               min="0"
                                               th:max="${service.getQuantity()}"
                                               value="0"
                                               name="quantityDrink"
                                               th:attr="onchange=|getFeeOneCard('pri${service.getId()}','qty${service.getId()}','tt${service.getId()}')|"
                                        >
                                        <button onclick="this.parentNode.querySelector('input[type=number]').stepUp()" class="plus"></button>
                                    </div>
                                    <p th:id="'tt'+${service.getId()}" class="tt" style="display: none">0</p>
                                </div>
                            </div>
                        </div>
                        <h4>Dịch vụ cho thuê</h4>
                        <div class="shirt">
                            <div class="row card-block p-4" style="margin-left: 20px">
                                <div th:each="service:${serviceList2}" id="service1" th:value="${service.getId()}"
                                     class=" col-sm-2 card text-left p-2 m-2" style="margin-left: 10px;margin-right: 10px">
                                    <img class="img" th:src="'/images/image-service/'+${service.getImage()}">
                                    <div class="card-body">
                                        <p th:text="${service.getId()}" class="serviceId" style="display:none;"></p>
                                        <h5 th:text="${service.getName()}"></h5>
                                        <h8 th:id="'pri'+${service.getId()}" class=" float-left mr-1 center mt-1"
                                            th:utext="${#numbers.formatDecimal(service.getPrice(),0, 'COMMA', 0, 'POINT')}"></h8>
                                        đ/
                                        <h7 th:text="${service.getUnit()}" class="mt-1"></h7>
                                        <div class="number-input" th:id="'demo'+${service.getId()}">
                                            <button onclick="this.parentNode.querySelector('input[type=number]').stepDown()" ></button>
                                            <input th:id="'qty'+${service.getId()}" type="number"
                                                   style="width: 40px;"
                                                   th:max="${service.getQuantity()}"
                                                   th:each="scheduleItem:${objPitchScheduleService}"
                                                   th:if="${scheduleItem.getServicePitchId()}==${service.getId()}"
                                                   th:value="${scheduleItem.quantity}?:0"
                                                   name="quantityService"
                                                   th:min="${scheduleItem.quantity}"
                                                   th:attr="onchange=|getFeeOneCard('pri${service.getId()}','qty${service.getId()}','tt${service.getId()}')|"
                                            >
                                            <input th:id="'qty'+${service.getId()}"
                                                   type="number" style="width: 40px;" min="0"
                                                   th:max="${service.getQuantity()}"
                                                   value="0"
                                                   name="quantityService"
                                                   th:attr="onchange=|getFeeOneCard('pri${service.getId()}','qty${service.getId()}','tt${service.getId()}')|"
                                            >
                                            <button onclick="this.parentNode.querySelector('input[type=number]').stepUp()" class="plus"></button>
                                        </div>
                                        <p th:id="'tt'+${service.getId()}" class="tt" style="display: none">0</p>
                                    </div>
                                </div>
                                <script th:inline="javascript">
                                    var arrObj1 = [[${serviceList2}]];
                                    console.log(arrObj1);
                                    arrObj1.forEach(element => {
                                        var atb = `#demo${element.id} > input`;
                                        // console.log(atb);
                                        var arr = document.querySelectorAll(atb);
                                        if (arr.length > 1) {
                                            arr[1].remove();
                                        }
                                    });
                                </script>
                            </div>
                            <div>
                                <h4 style="float: left; margin-right: 280px;">Phí dịch vụ: </h4>
                                <h4 id="totalAll1"  th:text="${#numbers.formatDecimal(sumOldScheduleService,0, 'COMMA', 0, 'POINT')}" style="color: #ff0000;float: left">0</h4>
                                <h4 style="color: red;float: left">đ</h4>
                            </div>
                            <br>
                        </div>
                        <br>
                        <br><br>
                        <div style="margin-left: auto" class="row">
                            <a class="btn btn-primary waves-effect" href="#"
                               th:href="@{'/manager/index/'}">Trở lại
                            </a>
                            <button class="btn btn-primary waves-effect"  th:data-id="${scheduleId}" type="submit"
                                    onclick="SaveAndUpdateScheduleService(this.getAttribute('data-id'))">Hoàn thành</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <script th:src="@{../../js/script.js}"></script>
    <!-- Bootstrap Notify Plugin Js -->
    <script th:src="@{../../plugins/bootstrap-notify/bootstrap-notify.js}"></script>
    <!-- SweetAlert Plugin Js -->
    <script th:src="@{../../plugins/sweetalert/sweetalert.min.js}"></script>
    <script th:src="@{../../js/pages/ui/dialogs.js}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>

    </script>
    <script th:inline="javascript">
        function remove(){
            var arrObj = [[${serviceList1}]];
            arrObj.forEach(element => {
                var atb = `#demo${element.id} > input`;
                var arr = document.querySelectorAll(atb);
                if (arr.length > 1) {
                    arr[1].remove();
                }else{
                }
            });
        }
        remove();
        const getName = () => {
            let list = [
                {
                    id: 1,
                    name: "Hieu"
                },
                {
                    id: 2,
                    name: "Tho"
                }, {
                id: 3,
                }
            ];
            list = list.map(el => {
                return {
                    ...el,
                    name: 'Hi'
                }
            })
            return list;
        }
        // function SaveAndUpdateScheduleService(scheduleId){
        //     var quantity=[], arrServiceQty=[], arrObj2 = [];
        //     quantity = document.querySelectorAll("input");
        //     for (let i = 8; i < quantity.length; i++) {
        //         arrServiceQty.push(quantity[i].value);
        //     }
        //     var arrServiceId = [];
        //     arrServiceId = document.querySelectorAll(".card-body > p:nth-child(1)");
        //     for (let i = 0; i < arrServiceQty.length; i++) {
        //         console.log(arrServiceId[i], arrServiceQty[i])
        //         var objService={servicePitchId:arrServiceId[i].innerText, quantity:arrServiceQty[i]};
        //         arrObj2.push(objService);
        //     }
        //     arrObj2.forEach(value => {
        //         console.log(value);
        //     });
        //     var json = JSON.stringify(arrObj2);
        //     console.log("json", json);
        //     var URL = "/edit-booking-service/"+scheduleId
        //     console.log(URL)
        //     $.ajax({
        //         type: "POST",
        //         url: URL,
        //         data: json,
        //         contentType: "application/json; charset=utf-8",
        //         dataType: "json",
        //         success: function (result) {
        //             swal({
        //                 title: "Cập nhật dịch vụ đơn đặt sân!",
        //                 text: "Phí dịch vụ trả thêm: "+result.data+"đ",
        //                 icon: "success",
        //                 button: "Ok!",
        //             }).then((value) => {
        //                 location.reload();
        //             });
        //
        //         }
        //     });
        // }
    </script>
</section>
</body>
</html>